<!doctype html>
<!--
		lucidGREP - Simple web.ui for text files
		Copyright (C) 2013	David Duong

		https://github.com/davidnqd/lucidGREP

		This program is free software: you can redistribute it and/or modify
		it under the terms of the GNU Affero General Public License as published by
		the Free Software Foundation, either version 3 of the License, or
		(at your option) any later version.

		This program is distributed in the hope that it will be useful,
		but WITHOUT ANY WARRANTY; without even the implied warranty of
		MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.	See the
		GNU Affero General Public License for more details.

		You should have received a copy of the GNU Affero General Public License
		along with this program.	If not, see <http://www.gnu.org/licenses/>.
--> 
<html lang='en'>
<head>
	<meta charset='utf-8' />
	<title>lucidGREP</title>
	<link rel='stylesheet' href='http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css' />
	<script src='http://code.jquery.com/jquery-2.0.0.js'></script>
	<script src='http://code.jquery.com/ui/1.10.2/jquery-ui.js'></script>

	<link rel='stylesheet' href='style.css' />
	<script src='client.js'></script>
	<script src='/socket.io/socket.io.js'></script>
	<script>

	var socket = io.connect();
	$(function() {
		$( '#tabs' ).tabs().css( 'border', 'none' );
		$( '#tail-tabs' ).tabs().addClass( 'ui-tabs-vertical ui-helper-clearfix' );
		$( '#tail-tabs li' ).removeClass( 'ui-corner-top' ).addClass( 'ui-corner-left' );
		$( '#grep-tabs' ).tabs().addClass( 'ui-tabs-vertical ui-helper-clearfix' );
		$( '#grep-tabs li' ).removeClass( 'ui-corner-top' ).addClass( 'ui-corner-left' );

		var lucidGREP = new LucidGREP($( '#tail-results' ));
		lucidGREP.asFilter($( '#tail-sources' ), 'source');
		lucidGREP.asMessageFilter($( '#tail-filter' ));
		lucidGREP.asHighlighter($( '#highlight-filter' ));

		socket.on('data', function (data) {
			if (!(data instanceof Array))
				data = [data];
			data.forEach(lucidGREP.addEvent, lucidGREP);
		});
	});
	</script>
</head>
<body>
 
<div id='tabs'>
	<ul>
		<li><a href='#tail-tab'>Tail</a></li>
		<li><a href='#grep-tab'>Grep</a></li>
	</ul>
	<div id='tail-tab'>
		<div id='tail-tabs'>
			<ul>
				<li><a href='#tail-filter-tab'>Filter</a></li>
				<li><a href='#tail-highlight-tab'>Highlight</a></li>
			</ul>
			<div id='tail-filter-tab'>
				<label for='tail-sources'>Sources: </label>
				<input id='tail-sources' size='50' /> <br/>
				<label for='tail-filter'>Message: </label>
				<input id='tail-filter' size='50' />
				<p>Show events which match <em>all</em> filters.</p>
			</div>
			<div id='tail-highlight-tab'>
				<label for='highlight-filter'>Message: </label>
				<input id='highlight-filter' size='50' />
				<p>Highlight events which match <em>all</em> filters.</p>
			</div>
		</div>
		<div id='tail-results' class='results'></div>
	</div>
	<div id='grep-tab'>
		<div id='grep-tabs'>
			<ul>
				<li><a href='#grep-about-tab'>Grep</a></li>
				<li><a href='#grep-filter-tab'>Filter</a></li>
			</ul>
			<div id='grep-about-tab'>
				<p>This tab displays log events in real time.</p>
			</div>
			<div id='grep-filter-tab'>
				<textarea></textarea>
				<p>For each line above, all results will be filtered</p>
			</div>
		</div>
		<div id='grep-results' class='results'></div>
	</div>
</div>
</body>
</html>